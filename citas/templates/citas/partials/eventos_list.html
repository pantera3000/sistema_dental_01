{% load static %}
<!-- Today's Events Banner -->
{% if today_events %}
<div class="today-banner">
    <h2>
        <i class="bi bi-calendar-event"></i>
        Citas de Hoy - {{ now|date:"l, d F Y" }}
    </h2>
    <div class="today-events-grid">
        {% for event in today_events %}
        <div class="today-event-card {% if event.local_begin < now %}past-event{% endif %}">
            <div class="today-event-time">
                <i class="bi bi-clock-fill"></i> {{ event.local_begin|date:"H:i" }}
            </div>
            <div class="today-event-title">{{ event.name }}</div>
            {% if event.location %}
            <div class="today-event-location">
                <i class="bi bi-geo-alt-fill"></i> {{ event.location }}
            </div>
            {% endif %}
            {% if event.description %}
            <div class="mt-2" style="opacity: 0.9; font-size: 0.95em;">
                {{ event.description|truncatechars:150 }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="alert alert-info" style="background: linear-gradient(135deg, #36d1dc 0%, #5b86e5 100%); border: none; color: white;">
    <i class="bi bi-info-circle"></i> <strong>No hay citas programadas para hoy</strong> - Disfruta tu día libre
</div>
{% endif %}

<!-- Section Header -->
<div class="section-header">
    <h3>
        {% if current_filter == 'week' %}
            <i class="bi bi-calendar-week"></i> Citas de esta Semana
        {% elif current_filter == 'month' %}
            <i class="bi bi-calendar-month"></i> Citas de este Mes
        {% elif current_filter == 'last_month' %}
            <i class="bi bi-calendar-minus"></i> Citas del Mes Pasado
        {% elif current_filter == 'next_3_months' %}
            <i class="bi bi-calendar-range"></i> Próximos 3 Meses
        {% else %}
            <i class="bi bi-calendar"></i> Todas las Citas
        {% endif %}
    </h3>
    <span class="badge">{{ filtered_events|length }} eventos</span>
</div>

<!-- Error Message -->
{% if error_message %}
<div class="alert alert-danger">
    <i class="bi bi-exclamation-triangle-fill"></i> {{ error_message }}
</div>
{% endif %}

<!-- Timeline -->
{% if filtered_events %}
<div class="timeline-container">
    <div class="timeline-line"></div>
    <div class="timeline-grid">
        {% for event in filtered_events %}
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card {% if event.local_begin < now %}past-event{% endif %}">
                <span class="timeline-time">
                    <i class="bi bi-clock"></i> {{ event.local_begin|date:"H:i" }}
                </span>
                <div class="timeline-title">{{ event.name }}</div>
                
                <div class="timeline-meta">
                    <div class="timeline-meta-item">
                        <i class="bi bi-calendar3"></i>
                        <strong>{{ event.local_begin|date:"l, d M Y" }}</strong>
                    </div>
                    {% if event.location %}
                    <div class="timeline-meta-item">
                        <i class="bi bi-geo-alt"></i>
                        {{ event.location }}
                    </div>
                    {% endif %}
                </div>

                {% if event.description %}
                <div class="mt-3" style="color: #6c757d; line-height: 1.6;">
                    {{ event.description|truncatechars:200 }}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="empty-state">
    <i class="bi bi-calendar-x"></i>
    <h4>No se encontraron citas en este periodo</h4>
    <p>Intenta seleccionar otro filtro para ver más eventos</p>
</div>
{% endif %}
